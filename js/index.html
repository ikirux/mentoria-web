<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Prueba Javascript</title>
    <style>
        .square {
            width: 100px;
            height: 100px;
        }

        .red {
            background-color: red;
        }

        .blue {
            background-color: blue;
        }
    </style>
</head>
<body>
    <div id="parentDiv">
        <div id="squareDiv" class="square red"></div>
        <button id="changeColorButton">Load Users</button>
    </div>

    <img id="imgLoad" src="" alt="">

    <table>
        <thead>
            <tr>
                <th>Nombre Completo</th>
            </tr>
        </thead>
        <tbody id="userTable">

        </tbody>
    </table>
    <script>
        // Ejemplo de uso de DOM
        // Event bubbling (burbujeo de eventos)
        // Ajax

        $('#changeColorButton').click(event => {
            const textDebug = 'El resultado es: ';
            (
                async (textDebug) => {
                    try {
                        const url1 = 'https://jsonplaceholder.typicode.com/todos/1'
                        const url2 = 'https://jsonplaceholder.typicode.com/todos/2'
                        const url3 = 'https://jsonplaceholder.typicode.com/todos/3'

                        const responses = await Promise.all([
                            fetch(url1),
                            fetch(url2),
                            fetch(url3)
                        ])

                        const dataPromises = await responses.map(response => response.json())
                        const todoes = await Promise.all(dataPromises)
                        todoes.forEach(todo => {
                            console.log(textDebug + todo.title)
                        })
                    } catch (error) {
                        console.log("Error: " + error)
                    }                
                }
            )(textDebug)




           /* const todo = async () => {
                try {
                    const url1 = 'https://jsonplaceholder.typicode.com/todos/1'
                    const url2 = 'https://jsonplaceholder.typicode.com/todos/2'
                    const url3 = 'https://jsonplaceholder.typicode.com/todos/3'

                    const responses = await Promise.all([
                        fetch(url1),
                        fetch(url2),
                        fetch(url3)
                    ])

                    const dataPromises = await responses.map(response => response.json())
                    return Promise.all(dataPromises)
                } catch (error) {
                    console.log("Error: " + error)
                }                
            }

            todo().then(res => {
                console.log(res)

                res.forEach(todo => {
                    console.log(todo.title)
                })
            })*/
        });



        //$('#changeColorButton').click(function(event) {


            /*promise
                .then(res => {
                    console.log(res);
                })
                .catch(error => {
                    console.error(error);
                });*/

                /*let promise = new Promise((resolve, reject) => {
                    setTimeout(() => {
                        resolve("Success");
                        //reject("fail");
                    }, 5000);
                });

                promise
                    .then((res) => {
                        console.log(res)
                    })*/

            /*fetch("http://mentoria1.segic.cl/")
                .then(res => {
                    //console.log(res.json());
                    return res.json();
                })
                .then(data => {
                    console.log(data);
                })
                .catch(err => {
                    console.error(err);
                });*/

            /*const loadData = async () => {
                const url = "http://mentoria1.segic.cl/";
                const res = await fetch(url);
                const data = await res.json();
                console.log(data);
            }

            loadData();*/

            /*fetch('https://jsonplaceholder.typicode.com/todos/1')
                .then(response => response.json())
                .then(json => console.log(json))*/

            /*const loadData = async () => {
                try {
                    const response = await fetch('https://jsonplaceholder.typicode.com/todos/1')
                    const json = await response.json()
                    return json
                } catch(err) {
                    console.log(err)
                }
            }*/

            /*const loadData = async () => {
                try {
                    const results = await Promise.all([
                        fetch('https://jsonplaceholder.typicode.com/todos/1'),
                        fetch('https://jsonplaceholder.typicode.com/todos/2'),
                        fetch('https://jsonplaceholder.typicode.com/todos/3')
                    ])

                    const dataPromises = results.map(result => result.json())
                    const fetchData = await Promise.all(dataPromises)
                    return fetchData
                } catch (err) {
                    console.error(err)
                }
            }*/

            /*loadData().then(json => console.log(json))*/

            /*let bla = 58;
            let ble = "Hola";

            (async (bla, ble) => {
                const data = await loadData();
                console.log(ble)
                console.log(bla)
                console.log(data)
            })(bla, ble);*/

            /*$.getJSON("http://mentoria1.segic.cl/", function(data) {
                console.log(data);

                let names = data.map((user) => user.firstname + " " + user.lastname);
                console.log(names);
                names.forEach(name => {
                    let trElement = "<tr><td>" + name + "</td></tr>";  
                    $('#userTable').append(trElement);
                    $('#userTable > tr').click(function() {
                        $(this)//.fadeOut("slow").remove();
                            .fadeOut("slow", function() {
                                $(this).remove();
                            });
                    })
                });
            });*/
        //});

       /* $('#changeColorButton').click(function(event) {
            $.getJSON("https://aws.random.cat/meow?ref=public-apis", function(data) {
                console.log(data);

                $('#imgLoad')
                    .attr('src', data.file)
                    .fadeIn("slow")
                    .click(function() {
                        $("#imgLoad").fadeOut("slow");
                    });
            });
        });*/


        /*$('#changeColorButton').click(function(event) {
            if ($('#squareDiv').hasClass('red')) {
                $('#squareDiv')
                    .removeClass('red')
                    .addClass('blue');
            } else {
                $('#squareDiv')
                    .removeClass('blue')
                    .addClass('red');                
            }

            $( "#squareDiv" ).fadeOut( "slow", function() {
                console.log('termino de desaparecer');
            });
        });*/

        /*document
            .getElementById('changeColorButton')
            .addEventListener('click', function(event) {
                event.stopPropagation();

                let divElement = document
                    .getElementById('squareDiv');

                if (divElement.classList.contains('red')) {
                    divElement.classList.replace('red', 'blue');
                } else {
                    divElement.classList.replace('blue', 'red');
                }
            });

        document
            .getElementById('parentDiv')
            .addEventListener('click', function(event) {
                console.log('yeah baby');
            });         */   




        // Document Object Model
        // axios y jquery (Yii)
        // Juego
        var tasks = [
            {
                "name": "Estudiar Javascript",
                "duration": 60
            },
            {
                "name": "Estudiar Vue",
                "duration": 150
            },
            {
                "name": "Estudiar Laravel",
                "duration": 100
            }
        ];

        //let taskNames = [];
        /*for (let i = 0; i < tasks.length; i++) {
            taskNames.push(tasks[i].name);
        }*/


        /*tasks.forEach(function(task) {
            taskNames.push(task.name);
        });*/

        // map filter reduce

        // (parametros) => return implicito

        //let taskNames = tasks.map((task) => task.name);

        /*let difficultTasks = [];
        tasks.forEach(function(task) {
            if (task.duration >= 100) {
                difficultTasks.push(task.name);
            }            
        });*/

        /*let difficultTasks = tasks.filter(function(task) {
            return task.duration >= 100;
        });*/

        /*let difficultTasks = tasks
            .filter((task) => task.duration >= 100)
            .map((task) => task.name);

        console.log(difficultTasks);


        let nombre = "Juan Perez";
        console.log('Hola, ' + nombre.toUpperCase());*/

        /*let frutas = ['Manzana', 'Peras', 'Naranjas', 'Platano'];
        let frutasEliminadas = frutas.splice(1, 1, 'Uva');
        console.log(frutas);
        console.log(frutasEliminadas);
        console.log(frutas.indexOf('Platano'));*/


    </script>
</body>
</html>